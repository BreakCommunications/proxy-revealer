#
#-----[ COPY ]------------------------------------------
#
copy root/probe.php to probe.php
copy root/includes/acp/acp_proxy_revealer.php to includes/acp/acp_proxy_revealer.php
copy root/language/en/mods/proxy_revealer.php to language/en/mods/proxy_revealer.php
copy root/language/en/mods/proxy_revealer_install.php to language/en/mods/proxy_revealer_install.php
copy root/install/functions_install.php to install/functions_install.php
copy root/install/index.php to install/index.php
copy root/install/style/install_error.html to install/style/install_error.html
copy root/install/style/install_footer.html to install/style/install_footer.html
copy root/install/style/install_header.html to install/style/install_header.html
copy root/install/style/install_main.html to install/style/install_main.html
#
#-----[ OPEN ]------------------------------------------
#
includes/constants.php
#
#-----[ FIND ]------------------------------------------
#
define('TOR_IPS',32);
#
#-----[ REPLACE WITH ]----------------------------------
#
define('TOR_DNSEL',32);
#
#-----[ FIND ]------------------------------------------
#
// this is used in admin_speculative.php
#
#-----[ REPLACE WITH ]----------------------------------
#
define('PROXY_DNSBL',128);
// this is used in acp_proxy_revealer.php
#
#-----[ OPEN ]------------------------------------------
#
includes/functions.php
#
#-----[ FIND ]------------------------------------------
#
	// If there are tests to defer and speculative_test is set, defer those tests until user logs in (or tries to register)
	if ($config['ip_block_defer'] && isset($speculative_test) && $speculative_test &&
		$user->page['page_name'] != "ucp.$phpEx" && $user->data['user_id'] == ANONYMOUS)
	{
		$defer_misc_ary = array(FLASH, JAVA, TOR_IPS, COOKIE, X_FORWARDED_FOR);
		$defer_misc_val = 0;
	
		foreach ($defer_misc_ary as $method)
		{
			if ((int) $config['ip_block_defer'] & (int) $method)
			{
				$defer_misc_val = $defer_misc_val | (int) $method;
			}
		}

		$probe_misc_url .= ($defer_misc_val != 0) ? "&amp;defer=$defer_misc_val" : '';
	
		$xss_test_on = ((int) $config['ip_block_defer'] & XSS) ? false : true;
	}
#
#-----[ REPLACE WITH ]----------------------------------
#
	// If there are tests to defer and speculative_test is set, defer those tests until user logs in (or tries to register)
	if ($config['ip_block_defer'] && isset($speculative_test) && $speculative_test &&
		$user->page['page_name'] != "ucp.$phpEx" && $user->data['user_id'] == ANONYMOUS)
	{
		$probe_misc_url .= "&amp;defer=" . $config['ip_block_defer'];
		$xss_test_on = ((int) $config['ip_block_defer'] & XSS) ? false : true;
	}
#
#-----[ DIY INSTRUCTIONS ]------------------------------
#

1. Login to the ACP after uploading included files and applying modifications as described above.
2. Point your browser to http://yoursite.com/forum-path/install/
3. Click Update and delete the install directory when you're finished.

#
#-----[ SAVE/CLOSE ALL FILES ]--------------------------
#
# EoM
